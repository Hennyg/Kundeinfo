<!doctype html>
<html lang="da">
<head>
  <meta charset="utf-8" />
  <title>Admin – Kundeinfo</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="stylesheet" href="./assets/style.css" />
  <style>
    .center-card { max-width: 520px; margin: 64px auto; }

    /* 2 kolonner (3 på store skærme) */
    .grid {
      display: grid;
      grid-template-columns: 1fr;
      gap: 16px;
      margin-top: 16px;
    }
    @media (min-width: 900px) {
      .grid { grid-template-columns: 1fr 1fr; }
    }
    @media (min-width: 1200px) {
      .grid { grid-template-columns: 1fr 1fr 1fr; }
    }

    .card h2 { margin-top: 0; }
    .card p { margin: 8px 0 12px; }
    .muted { color:#666; }
    .pill { display:inline-block; padding:2px 10px; border-radius:999px; background:#f3f3f3; font-size:12px; }
  </style>
</head>

<body>

  <!-- Loading -->
  <div class="container" id="loading">
    <div class="card center-card">
      <h2>Indlæser…</h2>
      <p class="muted">Tjekker loginstatus.</p>
    </div>
  </div>

  <!-- Ikke logget ind -->
  <div class="container" id="authDenied" style="display:none">
    <div class="card center-card">
      <h2>Log ind kræves</h2>
      <p class="muted">Du skal være logget ind for at åbne Admin.</p>
      <a class="btn btnlink" href="/.auth/login/aad">Log ind</a>
      <a class="btn" style="margin-left:8px" href="./index.html">Tilbage</a>
    </div>
  </div>

  <!-- App (skjult indtil authed) -->
  <div id="app" style="display:none">

    <div class="navbar">
      <div class="navbar-inner">
        <div class="brand">Admin - forside</div>
        <nav class="nav">
          <a href="./index.html">Hjem</a>
          <span class="sep">•</span>
          <a href="./admin.html">Admin</a>
        </nav>
      </div>
    </div>
    <div class="nav-accent"></div>

    <div class="container">
      <header>
        <h1>Admin · Kundeinfo</h1>
        <div id="authArea">
          <span id="userInfo" class="muted"></span>
          <a class="tag" href="/.auth/logout?post_logout_redirect_uri=/">Log ud</a>
        </div>
      </header>

      <section class="card">
        <p class="muted" style="margin:0;">
          Her vedligeholder du <span class="pill">spørgsmål</span>, <span class="pill">templates</span> og
          <span class="pill">kundesurveys</span>.
          <br>
          <strong>Templates</strong> = <code>lch_surveytemplate</code> + <code>lch_surveytemplateitem</code> ·
          <strong>Kundesurveys</strong> = <code>lch_surveyinstance</code> + <code>lch_surveyitem</code>
        </p>
      </section>

      <div class="grid">
        <!-- Spørgsmål -->
        <section class="card">
          <h2>Spørgsmål</h2>
          <p class="muted">Opret/ret spørgsmål i <code>lch_question</code>.</p>
          <a class="btn btnlink" href="./adminedit.html">Åbn spørgsmål</a>
        </section>

        <!-- Grupper -->
        <section class="card">
          <h2>Spørgegrupper</h2>
          <p class="muted">Vedligehold grupper i <code>lch_questiongroup</code>.</p>
          <a class="btn btnlink" href="./adminquestiongroup.html">Åbn grupper</a>
        </section>

        <!-- Templates: oversigt -->
        <section class="card">
          <h2>Templates</h2>
          <p class="muted">Se eksisterende templates og opret kundesurveys fra dem.</p>
          <a class="btn btnlink" href="./admintemplates.html">Åbn templates-oversigt</a>
        </section>

        <!-- Templates: builder -->
        <section class="card">
          <h2>Template builder</h2>
          <p class="muted">Opret/ret template i <code>lch_surveytemplate</code> og items i <code>lch_surveytemplateitem</code>.</p>
          <a class="btn btnlink" href="./admintemplatebuilder.html">Åbn template builder</a>
          <!-- Hvis du ikke har siden endnu, skift til ./adminsurvey.html midlertidigt -->
        </section>

        <!-- Kundesurvey: opret -->
        <section class="card">
          <h2>Opret kundesurvey</h2>
          <p class="muted">Opret en <code>lch_surveyinstance</code> (kundelink + kode) ud fra en template.</p>
          <a class="btn btnlink" href="./admincreate.html">Åbn “opret kundesurvey”</a>
        </section>

        <!-- Kundesurveys: oversigt -->
        <section class="card">
          <h2>Kundesurveys</h2>
          <p class="muted">Oversigt over oprettede kundesurveys, prefill og links.</p>
          <a class="btn btnlink" href="./adminoversigt.html">Åbn kundesurveys</a>
        </section>

        <!-- Forside -->
        <section class="card">
          <h2>Kundeindgang</h2>
          <p class="muted">Gå til kundeindgang (6-cifret kode).</p>
          <a class="btn btnlink" href="./index.html">Åbn index</a>
        </section>
      </div>
    </div>
  </div>

  <!-- Auth-guard -->
  <script type="module">
    import { requireAuth } from "./assets/auth-guard.js";
    requireAuth({ autoRedirect: false });
  </script>

  <script type="module" src="./assets/adminhub.js"></script>
</body>
</html>
