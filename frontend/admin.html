<!doctype html>
<html lang="da">
<head>
  <meta charset="utf-8" />
  <title>Admin – Kundeinfo</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="stylesheet" href="./assets/style.css" />
  <style>
    .center-card { max-width: 520px; margin: 64px auto; }
  </style>
</head>

<body>

  <!-- Loading -->
  <div class="container" id="loading">
    <div class="card center-card">
      <h2>Indlæser…</h2>
      <p class="muted">Tjekker loginstatus.</p>
    </div>
  </div>

  <!-- Ikke logget ind -->
  <div class="container" id="authDenied" style="display:none">
    <div class="card center-card">
      <h2>Log ind kræves</h2>
      <p class="muted">Du skal være logget ind for at åbne Admin.</p>
      <a class="btn btnlink" href="/.auth/login/aad">Log ind</a>
      <a class="btn" style="margin-left:8px" href="./index.html">Tilbage</a>
    </div>
  </div>

  <!-- App (skjult indtil authed) -->
  <div id="app" style="display:none">

    <div class="navbar">
      <div class="navbar-inner">
        <div class="brand">Admin - forside</div>
        <nav class="nav">
          <a href="./index.html">Hjem</a>
          <span class="sep">•</span>
          <a href="./admin.html">Admin</a>
        </nav>
      </div>
    </div>
    <div class="nav-accent"></div>

    <div class="container">
      <header>
        <h1>Admin · Kundeinfo</h1>
        <div id="authArea">
          <span id="userInfo" class="muted"></span>
          <a class="tag" href="/.auth/logout?post_logout_redirect_uri=/">Log ud</a>
        </div>
      </header>

      <section class="card">
        <p class="muted">
          Admin-hub til at vedligeholde spørgsmål og oprette spørgeskemaer (survey-instans) med kode + link.
        </p>
      </section>

      <div class="grid">
        <section class="card">
          <h2>Oversigt spørgsmål</h2>
          <p class="muted">Opret/ret spørgsmål i <code>lch_question</code>.</p>
          <a class="btn btnlink" href="./adminedit.html">Åbn Admin – Spørgsmål</a>
        </section>

        <section class="card">
          <h2>Survey grupper</h2>
          <p class="muted">Oversigt survey grupper</p>
          <a class="btn btnlink" href="./adminquestiongroup.html">Åbn Admin – gruppeoversigt</a>
        </section>

        <section class="card">
          <h2>Opret spørgeskema</h2>
          <p class="muted">Opret survey-instans i <code>lch_surveyinstance</code> og tilføj spørgsmål som <code>lch_surveyitem</code>.</p>
          <a class="btn btnlink" href="./adminsurvey.html">Åbn Admin – Spørgeskema</a>
        </section>

        <section class="card">
          <h2>Oversigt spørgeskema</h2>
          <p class="muted">Se oprettede spørgeskemaer</p>
          <a class="btn btnlink" href="./adminoversigt.html">Åbn Admin – skemaoversigt</a>
        </section>
        
        <section class="card">
          <h2>Forside</h2>
          <p class="muted">Gå til kundeindgang (6-cifret kode).</p>
          <a class="btn btnlink" href="./index.html">Åbn index</a>
        </section>
      </div>
    </div>
  </div>

  <!-- Auth-guard -->
  <script type="module">
    import { requireAuth } from "./assets/auth-guard.js";
    requireAuth({ autoRedirect: false }); // sæt true hvis du vil auto-sende til login
  </script>

  <!-- Din eksisterende JS (valgfri her) -->
  <script type="module" src="./assets/adminhub.js"></script>
</body>
</html>
